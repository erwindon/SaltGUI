!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){
/*@cc_on @*/
if(sorttable={init:function(){arguments.callee.done||(arguments.callee.done=!0,n&&clearInterval(n),document.createElement&&document.getElementsByTagName&&(sorttable.DATE_RE=/^(\d\d?)[\/\.-](\d\d?)[\/\.-]((\d\d)?\d\d)$/,a(document.getElementsByTagName("table"),function(e){-1!=e.className.search(/\bsortable\b/)&&sorttable.makeSortable(e)})))},makeSortable:function(e){if(0==e.getElementsByTagName("thead").length&&(the=document.createElement("thead"),the.appendChild(e.rows[0]),e.insertBefore(the,e.firstChild)),null==e.tHead&&(e.tHead=e.getElementsByTagName("thead")[0]),1==e.tHead.rows.length){sortbottomrows=[];for(var t=0;t<e.rows.length;t++)-1!=e.rows[t].className.search(/\bsortbottom\b/)&&(sortbottomrows[sortbottomrows.length]=e.rows[t]);if(sortbottomrows){null==e.tFoot&&(tfo=document.createElement("tfoot"),e.appendChild(tfo));for(t=0;t<sortbottomrows.length;t++)tfo.appendChild(sortbottomrows[t]);delete sortbottomrows}headrow=e.tHead.rows[0].cells;for(t=0;t<headrow.length;t++)headrow[t].className.match(/\bsorttable_nosort\b/)||(mtch=headrow[t].className.match(/\bsorttable_([a-z0-9]+)\b/),mtch&&(override=mtch[1]),mtch&&"function"==typeof sorttable["sort_"+override]?headrow[t].sorttable_sortfunction=sorttable["sort_"+override]:headrow[t].sorttable_sortfunction=sorttable.guessType(e,t),headrow[t].sorttable_columnindex=t,headrow[t].sorttable_tbody=e.tBodies[0],r(headrow[t],"click",sorttable.innerSortFunction=function(e){if(-1!=this.className.search(/\bsorttable_sorted\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted","sorttable_sorted_reverse"),this.removeChild(document.getElementById("sorttable_sortfwdind")),sortrevind=document.createElement("span"),sortrevind.id="sorttable_sortrevind",sortrevind.innerHTML="&nbsp;â†‘",void this.appendChild(sortrevind);if(-1!=this.className.search(/\bsorttable_sorted_reverse\b/))return sorttable.reverse(this.sorttable_tbody),this.className=this.className.replace("sorttable_sorted_reverse","sorttable_sorted"),this.removeChild(document.getElementById("sorttable_sortrevind")),sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML="&nbsp;â†“",void this.appendChild(sortfwdind);theadrow=this.parentNode,a(theadrow.childNodes,function(e){1==e.nodeType&&(e.className=e.className.replace("sorttable_sorted_reverse",""),e.className=e.className.replace("sorttable_sorted",""))}),sortfwdind=document.getElementById("sorttable_sortfwdind"),sortfwdind&&sortfwdind.parentNode.removeChild(sortfwdind),sortrevind=document.getElementById("sorttable_sortrevind"),sortrevind&&sortrevind.parentNode.removeChild(sortrevind),this.className+=" sorttable_sorted",sortfwdind=document.createElement("span"),sortfwdind.id="sorttable_sortfwdind",sortfwdind.innerHTML="&nbsp;â†“",this.appendChild(sortfwdind),row_array=[],col=this.sorttable_columnindex,rows=this.sorttable_tbody.rows;for(var t=0;t<rows.length;t++)row_array[row_array.length]=[sorttable.getInnerText(rows[t].cells[col]),rows[t]];row_array.sort(this.sorttable_sortfunction),tb=this.sorttable_tbody;for(t=0;t<row_array.length;t++)tb.appendChild(row_array[t][1]);delete row_array}))}},guessType:function(e,t){sortfn=sorttable.sort_alpha;for(var n=0;n<e.tBodies[0].rows.length;n++)if(text=sorttable.getInnerText(e.tBodies[0].rows[n].cells[t]),""!=text){if(text.match(/^-?[ï¿½$ï¿½]?[\d,.]+%?$/))return sorttable.sort_numeric;if(possdate=text.match(sorttable.DATE_RE),possdate){if(first=parseInt(possdate[1]),second=parseInt(possdate[2]),first>12)return sorttable.sort_ddmm;if(second>12)return sorttable.sort_mmdd;sortfn=sorttable.sort_ddmm}}return sortfn},getInnerText:function(e){if(!e)return"";if(hasInputs="function"==typeof e.getElementsByTagName&&e.getElementsByTagName("input").length,null!=e.getAttribute("sorttable_customkey"))return e.getAttribute("sorttable_customkey");if(void 0!==e.textContent&&!hasInputs)return e.textContent.replace(/^\s+|\s+$/g,"");if(void 0!==e.innerText&&!hasInputs)return e.innerText.replace(/^\s+|\s+$/g,"");if(void 0!==e.text&&!hasInputs)return e.text.replace(/^\s+|\s+$/g,"");switch(e.nodeType){case 3:if("input"==e.nodeName.toLowerCase())return e.value.replace(/^\s+|\s+$/g,"");case 4:return e.nodeValue.replace(/^\s+|\s+$/g,"");case 1:case 11:for(var t="",n=0;n<e.childNodes.length;n++)t+=sorttable.getInnerText(e.childNodes[n]);return t.replace(/^\s+|\s+$/g,"");default:return""}},reverse:function(e){newrows=[];for(var t=0;t<e.rows.length;t++)newrows[newrows.length]=e.rows[t];for(t=newrows.length-1;t>=0;t--)e.appendChild(newrows[t]);delete newrows},sort_numeric:function(e,t){return aa=parseFloat(e[0].replace(/[^0-9.-]/g,"")),isNaN(aa)&&(aa=0),bb=parseFloat(t[0].replace(/[^0-9.-]/g,"")),isNaN(bb)&&(bb=0),aa-bb},sort_alpha:function(e,t){return e[0]==t[0]?0:e[0]<t[0]?-1:1},sort_ddmm:function(e,t){return mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],m=mtch[2],d=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},sort_mmdd:function(e,t){return mtch=e[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt1=y+m+d,mtch=t[0].match(sorttable.DATE_RE),y=mtch[3],d=mtch[2],m=mtch[1],1==m.length&&(m="0"+m),1==d.length&&(d="0"+d),dt2=y+m+d,dt1==dt2?0:dt1<dt2?-1:1},shaker_sort:function(e,t){for(var n=0,r=e.length-1,o=!0;o;){o=!1;for(var i=n;i<r;++i)if(t(e[i],e[i+1])>0){var a=e[i];e[i]=e[i+1],e[i+1]=a,o=!0}if(r--,!o)break;for(i=r;i>n;--i)if(t(e[i],e[i-1])<0){a=e[i];e[i]=e[i-1],e[i-1]=a,o=!0}n++}}},document.addEventListener&&document.addEventListener("DOMContentLoaded",sorttable.init,!1),/WebKit/i.test(navigator.userAgent))var n=setInterval(function(){/loaded|complete/.test(document.readyState)&&sorttable.init()},10);function r(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{n.$$guid||(n.$$guid=r.guid++),e.events||(e.events={});var i=e.events[t];i||(i=e.events[t]={},e["on"+t]&&(i[0]=e["on"+t])),i[n.$$guid]=n,e["on"+t]=o}}function o(e){var t=!0;e=e||i(((this.ownerDocument||this.document||this).parentWindow||window).event);var n=this.events[e.type];for(var r in n)this.$$handleEvent=n[r],!1===this.$$handleEvent(e)&&(t=!1);return t}function i(e){return e.preventDefault=i.preventDefault,e.stopPropagation=i.stopPropagation,e}window.onload=sorttable.init,r.guid=1,i.preventDefault=function(){this.returnValue=!1},i.stopPropagation=function(){this.cancelBubble=!0},Array.forEach||(Array.forEach=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,e[r],r,e)}),Function.prototype.forEach=function(e,t,n){for(var r in e)void 0===this.prototype[r]&&t.call(n,e[r],r,e)},String.forEach=function(e,t,n){Array.forEach(e.split(""),function(r,o){t.call(n,r,o,e)})};var a=function(e,t,n){if(e){var r=Object;if(e instanceof Function)r=Function;else{if(e.forEach instanceof Function)return void e.forEach(t,n);"string"==typeof e?r=String:"number"==typeof e.length&&(r=Array)}r.forEach(e,t,n)}}},function(e,t){var n=/^(None|null|Null|NULL)$/,r=/^(false|False|FALSE)$/,o=/^(true|True|TRUE)$/,i=/^[2-9][0-9][0-9][0-9][01][0-9][0-3][0-9][0-2][0-9][0-5][0-9][0-5][0-9][0-9][0-9][0-9][0-9][0-9][0-9]$/,a=/^((0)|([-+]?[1-9][0-9]*))$/,u=/^([-+]?(([0-9]+)|([0-9]+[.][0-9]*)|([0-9]*[.][0-9]+))([eE][-+]?[0-9]+)?)$/;window.parseCommandLine=function(e,t,l){for(e=e.trim();e.length>0;){var s=null,c=e.indexOf(" ");c<0&&(c=e.length);var d=e.indexOf("=");if(d>=0&&d<c&&(s=e.substr(0,d),""===(e=e.substr(d+1))||" "===e[0]))return"Must have value for named parameter '"+s+"'";var f=void 0,p=void 0;"{"===e[0]?(f="}",p="dictionary"):"["===e[0]?(f="]",p="array"):'"'===e[0]&&(f='"',p="double-quoted-string");var y=void 0;if(f&&p)for(var m=1;;){var h=e.indexOf(f,m);if(h<0)return"No valid "+p+" found";var b=e.substring(0,h+1);try{y=JSON.parse(b)}catch(e){m=h+1;continue}if((h+=1)<e.length&&" "!==e[h])return"Valid "+p+", but followed by text:"+e.substring(h)+"...";e=e.substring(h);break}else{for(var v="";e.length>0&&" "!==e[0];)v+=e[0],e=e.substring(1);if(n.test(v))y=null;else if(r.test(v))y=!1;else if(o.test(v))y=!0;else if(i.test(v))y=v;else if(a.test(v))y=parseInt(v);else if(u.test(v)){if(y=parseFloat(v),!isFinite(y))return"Numeric argument has overflowed or is infinity"}else y=v}null!==s?l[s]=y:t.push(y),e=e.trim()}return null}},function(e,t){window.elapsedToString=function(e){try{var t=(new Date).getTime()/1e3-e.getTime()/1e3;return t<0?"Magic happened in the future":t<20?"A few moments ago":t<120?"A few minutes ago":t<3600?Math.round(t/60)+" minute(s) ago":t<86400?Math.round(t/60/60)+" hour(s) ago":t<172800?"Yesterday":t<2592e3?Math.round(t/60/60/24)+" days ago":"A long time ago, in a galaxy far, far away"}catch(e){return"It did happen, when I don't know"}},window.createElement=function(e,t,n){var r=document.createElement(e);return r.classList.add(t),""!==n&&(r.innerHTML=n),r},window.getQueryParam=function(e){var t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value.split("=");if(t.push(l[0]),l[0]===e)return l[1]}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}},window.escape=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},window.makeTargetText=function(e,t){var n="";return"glob"!==e&&"list"!==e&&(n=e+" "),n+=t}},function(e,t,n){"use strict";n.r(t);n(0),n(1),n(2);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n,r,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.path=new RegExp(t),this.name=n,this.page_element=document.querySelector(r),this.router=i,o&&(this.menuitem_element1=document.querySelector(o+"1"),this.menuitem_element2=document.querySelector(o+"2"))}var t,n,i;return t=e,i=[{key:"_createTd",value:function(e,t){var n=document.createElement("td");return e&&(n.className=e),n.innerText=t,n}},{key:"_createDiv",value:function(e,t){var n=document.createElement("div");return e&&(n.className=e),n.innerText=t,n}}],(n=[{key:"getName",value:function(){return this.name}},{key:"getPath",value:function(){return this.path}},{key:"getPageElement",value:function(){return this.page_element}},{key:"getMenuItemElement1",value:function(){return this.menuitem_element1}},{key:"getMenuItemElement2",value:function(){return this.menuitem_element2}},{key:"_runCommand",value:function(e,t,n){this._runFullCommand(e,"",t,n)}},{key:"_runFullCommand",value:function(e,t,n,r){this.router.commandbox._showManualRun(e);var o=document.querySelector("#target"),i=document.querySelector("#command"),a=document.querySelector("#targetbox");if("unknown-target"===n&&(n="",t=""),r.startsWith("wheel.")&&n.endsWith("_master")&&(n="",t=""),r.startsWith("runners.")&&(n="",t=""),n||(n=""),r||(r=""),t){var u=t;a.style.display="inherit","glob"!==u&&"list"!==u&&"compound"!==u&&"nodegroup"!==u&&(u="glob"),TargetType.setTargetType(u)}o.value=n,i.value=r,this.router.commandbox.cmdmenu.verifyAll()}},{key:"_decodeArgumentsText",value:function(e){var t=e,n="";switch(r(t)){case"undefined":n="";break;case"object":var o=Object.keys(t).sort(),i=!0,a=!1,u=void 0;try{for(var l,s=o[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;c.includes("__")||(n=n+c+"="+t[c])}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}break;default:n=JSON.stringify(t)}return n}}])&&o(t.prototype,n),i&&o(t,i),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=l(t).call(this,"^[/]login$","Login","#page_login","",e))||"object"!==a(o)&&"function"!=typeof o?s(r):o).loginPending=!1,n.onLogin=n.onLogin.bind(s(n)),n.onLoginSuccess=n.onLoginSuccess.bind(s(n)),n.onLoginFailure=n.onLoginFailure.bind(s(n)),n.registerEventListeners(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,i),n=t,(r=[{key:"onShow",value:function(){var e=document.querySelector("#login-form #eauth"),t=window.localStorage.getItem("eauth");e.value=t||"pam"}},{key:"registerEventListeners",value:function(){document.querySelector("#login-form").addEventListener("submit",this.onLogin)}},{key:"onLogin",value:function(e){if(e.preventDefault(),!this.loginPending){var t=document.querySelector("#username").value,n=document.querySelector("#password").value,r=document.querySelector("#eauth").value;this.toggleForm(!1),this.router.api.login(t,n,r).then(this.onLoginSuccess,this.onLoginFailure)}}},{key:"onLoginSuccess",value:function(){this.toggleForm(!0);var e=document.querySelector(".notice-wrapper"),t=i._createDiv("notice","Please wait...");t.style.backgroundColor="#4CAF50",e.replaceChild(t,e.firstChild),document.querySelector("#username").disabled=!0,document.querySelector("#password").disabled=!0,document.querySelector("#eauth").disabled=!0,e.className="notice-wrapper",e.focus(),e.className="notice-wrapper show",this.router.goTo("/")}},{key:"onLoginFailure",value:function(){this.toggleForm(!0);var e=document.querySelector(".notice-wrapper"),t=i._createDiv("notice","Authentication failed");t.style.backgroundColor="#F44336",e.replaceChild(t,e.firstChild),e.className="notice-wrapper",e.focus(),e.className="notice-wrapper show"}},{key:"toggleForm",value:function(e){this.loginPending=!e,document.querySelector("#login-form input[type='submit']").disabled=!e}}])&&u(n.prototype,r),o&&u(n,o),t}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isDocuKeyMatch",value:function(e,t){return!t||(e===t||!!e.startsWith(t+"."))}},{key:"isDocumentationOutput",value:function(t,n,r){if(!t.isOutputFormatAllowed("doc"))return!1;var o=!1;r=e.reduceFilterKey(r);for(var i=Object.keys(n),a=0;a<i.length;a++){var u=n[i[a]];if(u){if("object"!==f(u))return!1;if(Array.isArray(u))return!1;for(var l=Object.keys(u),s=0;s<l.length;s++){var c=l[s];if(null!==u[c]){if("string"!=typeof u[c])return!1;e.isDocuKeyMatch(c,r)&&(o=!0)}}}}return o}},{key:"reduceFilterKey",value:function(e){return"wheel"===e?"":e.startsWith("wheel.")?e.substring(6):"runners"===e?"":e.startsWith("runners.")?e.substring(8):e}},{key:"reduceDocumentationOutput",value:function(t,n,r){if(t&&"object"===f(t)){r=e.reduceFilterKey(r);for(var o=null,i=Object.keys(t),a=0;a<i.length;a++){var u=i[a];if(o)delete t[u];else if(t[u]&&"object"===f(t[u])){for(var l=t[u],s=Object.keys(l),c=0;c<s.length;c++){var d=s[c];e.isDocuKeyMatch(d,r)||delete l[d]}0!==Object.keys(l).length?o=u:delete t[u]}else delete t[u]}if(o){var p=t[o];delete t[o],t[n]=p}else t.dummy={},t.dummy[n]="no documentation found"}}},{key:"addDocumentationOutput",value:function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var o=t[n[r]],i=!0,a=!1,u=void 0;try{for(var l,s=Object.keys(o).sort()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,d=o[c];if(null!==d){for(d=(d=(d=(d=(d=(d=(d=d.trimRight()).replace(/[.][.] rubric:: */g,"")).replace(/(:[a-z_]*)*:`/g,"`")).replace(/[ \n]*<[^`]*>`/gm,"`")).replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;");d.includes(".. _");){var f=d.replace(/^(.|\n|\r)*[.][.] _/m,"").replace(/(\n|\r)(.|\n|\r)*$/m,""),p=f.split(": ");if(2!==p.length){console.log("words",p);break}for(var y=p[0],m=p[1];d.includes(y+"_");)d=d.replace(y+"_","<a href='"+m+"' target='_blank'>"+y+"</a>");d=d.replace(".. _"+f,"")}d=(d=(d=(d=d.replace(/``([^`]*)``/g,"<span style='background-color: #575757'>$1</span>")).replace(/`([^`]*)`/g,"<span style='color: yellow'>$1</span>")).replace(/  *\n/gm,"")).replace(/\n\n\n*/gm,"\n\n"),e.innerHTML+="<div><span class='hostname'>"+c+"</span>:</br><pre style='height: initial; overflow-y: initial;'>"+d+"</pre></div>"}}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}}}}],(n=null)&&p(t.prototype,n),r&&p(t,r),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isHighStateOutput",value:function(e,t){if(!x.isOutputFormatAllowed("highstate"))return!1;if("object"!==m(t))return!1;if(Array.isArray(t))return!1;if("state.apply"!==e&&"state.highstate"!==e)return!1;for(var n=Object.keys(t),r=0;r<n.length;r++){if(4!==n[r].split("_|-").length)return!1}return!0}},{key:"getDurationClause",value:function(e){return 1===e?"".concat(e," millisecond"):e<1e3?"".concat(e," milliseconds"):"".concat(e/1e3,1e3===e?" second":" seconds")}},{key:"getHighStateLabel",value:function(e,t){for(var n=!1,r=!1,o=Object.keys(t),i=0;i<o.length;i++){var a=t[o[i]];null===a.result?r=!0:a.result||(n=!0)}return n?x.getHostnameHtml(e,"host_failure"):r?x.getHostnameHtml(e,"host_skips"):x.getHostnameHtml(e,"host_success")}},{key:"getHighStateOutput",value:function(t){var n=[];Object.keys(t).forEach(function(e){t[e].___key___=e,n.push(t[e])}),n.sort(function(e,t){return e.__run_num__-t.__run_num__});for(var r=document.createElement("div"),o=0,i=0,a=0,u=0,l=0,s=0;s<n.length;s++){var c=n[s],d=document.createElement("div"),f=document.createElement("span");null===c.result?(f.style.color="yellow",f.innerText="âœ”",a+=1):c.result?(f.style.color="green",f.innerText="âœ”",o+=1):(f.style.color="red",f.innerText="âœ˜",i+=1),d.append(f),d.append(document.createTextNode(" ")),c.name?d.append(document.createTextNode(c.name)):d.append(document.createTextNode("(anonymous task)")),c.__id__&&c.__id__!==c.name&&d.append(document.createTextNode(" id="+encodeURIComponent(c.__id__))),c.__sls__&&d.append(document.createTextNode(" (from "+c.__sls__.replace(".","/")+".sls)"));var p=c.___key___.split("_|-");if(d.append(document.createElement("br")),d.append(document.createTextNode("    Function is "+p[0]+"."+p[3])),c.comment){d.append(document.createElement("br"));var y=c.comment;y=(y=y.replace(/[ \r\n]+$/g,"")).replace(/[\n]+/g,"\n    "),d.append(document.createTextNode("    "+y))}if(c.hasOwnProperty("changes"))if("object"!==m(c.changes)||Array.isArray(c.changes))d.append(document.createElement("br")),d.append(document.createTextNode("    "+JSON.stringify(c.changes)));else{var h=!0,b=!1,v=void 0;try{for(var g,_=Object.keys(c.changes).sort()[Symbol.iterator]();!(h=(g=_.next()).done);h=!0){var w=g.value;l+=1;var T=c.changes[w];if("string"==typeof T&&T.includes("\n")){d.append(document.createElement("br")),d.append(document.createTextNode("    "+w+":"));var S=T.trim().split("\n"),k=!0,O=!1,E=void 0;try{for(var j,C=S[Symbol.iterator]();!(k=(j=C.next()).done);k=!0){var R=j.value;d.append(document.createElement("br")),d.append(document.createTextNode("      "+R))}}catch(e){O=!0,E=e}finally{try{k||null==C.return||C.return()}finally{if(O)throw E}}}else if("object"!==m(T)||Array.isArray(c.change))d.append(document.createElement("br")),d.append(document.createTextNode("    "+w+": "+JSON.stringify(T)));else{T.hasOwnProperty("old")&&T.hasOwnProperty("new")&&(d.append(document.createElement("br")),d.append(document.createTextNode("    "+w+": "+JSON.stringify(T.old)+" â–º "+JSON.stringify(T.new))),delete T.old,delete T.new);var L=!0,P=!1,x=void 0;try{for(var M,I=Object.keys(T).sort()[Symbol.iterator]();!(L=(M=I.next()).done);L=!0){var N=M.value;d.append(document.createElement("br")),d.append(document.createTextNode("    "+w+": "+N+": "+JSON.stringify(T[N])))}}catch(e){P=!0,x=e}finally{try{L||null==I.return||I.return()}finally{if(P)throw x}}}}}catch(e){b=!0,v=e}finally{try{h||null==_.return||_.return()}finally{if(b)throw v}}}if(c.hasOwnProperty("start_time")&&(d.append(document.createElement("br")),d.append(document.createTextNode("    Started at "+c.start_time))),c.hasOwnProperty("duration")){var A=Math.round(c.duration);u+=A,A>=10&&(d.append(document.createElement("br")),d.append(document.createTextNode("    Duration "+e.getDurationClause(A))))}for(var J=Object.keys(c),D=0;D<J.length;D++){var q=J[D],F=c[q];"___key___"!==q&&("__id__"!==q&&"__sls__"!==q&&"__run_num__"!==q&&"changes"!==q&&"comment"!==q&&"duration"!==q&&"host"!==q&&"name"!==q&&"pchanges"!==q&&"result"!==q&&"start_time"!==q&&(d.append(document.createElement("br")),d.append(document.createTextNode("    "+q+" = "+JSON.stringify(F)))))}r.append(d)}var B="";o&&(B+=", "+o+" succeeded"),a&&(B+=", "+a+" skipped"),i&&(B+=", "+i+" failed");var W=o+a+i;return W!==o&&W!==a&&W!==i&&(B+=", "+(o+a+i)+" total"),1===l?B+=", "+l+" change":l&&(B+=", "+l+" changes"),W>1&&u>=10&&(B+=", "+e.getDurationClause(u)),B&&r.append(document.createTextNode(B.substring(2))),r}}],(n=null)&&h(t.prototype,n),r&&h(t,r),e}();function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"formatSimpleJSON",value:function(e){return null===e?JSON.stringify(e):void 0===e?"undefined":"object"!==v(e)?JSON.stringify(e):Array.isArray(e)&&0===e.length?"[ ]":Array.isArray(e)||0!==Object.keys(e).length?null:"{ }"}},{key:"formatJSON",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.formatSimpleJSON(t);if(null!==r)return r;if(Array.isArray(t)){r="[";var o="",i=!0,a=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;r+=o+"\n"+" ".repeat(n+4)+e.formatJSON(c,n+4),o=","}}catch(e){a=!0,u=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw u}}return r+="\n"+" ".repeat(n)+"]"}Object.keys(t);r="{";var d="",f=!0,p=!1,y=void 0;try{for(var m,h=Object.keys(t).sort()[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var b=m.value,v=t[b];r+=d+"\n"+" ".repeat(n+4)+'"'+b+'": '+e.formatJSON(v,n+4),d=","}}catch(e){p=!0,y=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw y}}return r+="\n"+" ".repeat(n)+"}"}}],(n=null)&&g(t.prototype,n),r&&g(t,r),e}();function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"ustring",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return" ".repeat(e)+n+t+r}},{key:"display",value:function(t,n,r,o){if(null===t)o.push(e.ustring(n,"None",r));else if(void 0===t)o.push(e.ustring(n,"undefined",r));else if("boolean"==typeof t||"number"==typeof t)o.push(e.ustring(n,t,r));else if("string"==typeof t){var i=!0;t=t.replace(/\n$/,"");var a=!0,u=!1,l=void 0;try{for(var s,c=t.split("\n")[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value,f=r;i||(f=".".repeat(r.length)),o.push(e.ustring(n,d,f)),i=!1}}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}}else if("object"===w(t)&&Array.isArray(t)){var p=!0,y=!1,m=void 0;try{for(var h,b=t[Symbol.iterator]();!(p=(h=b.next()).done);p=!0){var v=h.value;if("object"===w(v)){o.push(e.ustring(n,"|_"));var g=void 0;g="object"!==w(v)||Array.isArray(v)?"-Â ":"",e.display(v,n+2,g,o)}else e.display(v,n,"-Â ",o)}}catch(e){y=!0,m=e}finally{try{p||null==b.return||b.return()}finally{if(y)throw m}}}else if("object"===w(t)){n&&o.push(e.ustring(n,"----------"));var _=!0,T=!1,S=void 0;try{for(var k,O=Object.keys(t).sort()[Symbol.iterator]();!(_=(k=O.next()).done);_=!0){var E=k.value,j=t[E];o.push(e.ustring(n,E,r,":")),null!==j&&""!==j&&e.display(j,n+4,"",o)}}catch(e){T=!0,S=e}finally{try{_||null==O.return||O.return()}finally{if(T)throw S}}}return o}},{key:"formatNESTED",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.display(t,0,"",[]).join("\n")}}],(n=null)&&T(t.prototype,n),r&&T(t,r),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getDurationClause",value:function(e){return 1===e?"".concat(e," millisecond"):e<1e3?"".concat(e," milliseconds"):"".concat(e/1e3,1e3===e?" second":" seconds")}},{key:"getHighStateLabel",value:function(e,t){for(var n=!1,r=!1,o=Object.keys(t),i=0;i<o.length;i++){var a=t[o[i]];null===a.result?r=!0:a.result||(n=!0)}return n?x.getHostnameHtml(e,"host_failure"):r?x.getHostnameHtml(e,"host_skips"):x.getHostnameHtml(e,"host_success")}},{key:"addChangesInfo",value:function(e,t,n){if(!t.hasOwnProperty("changes"))return 0;if("object"!==k(t.changes)||Array.isArray(t.changes))return e.append(document.createElement("br")),e.append(document.createTextNode(n+JSON.stringify(t.changes))),0;var r=!0,o=!1,i=void 0;try{for(var a,u=Object.keys(t.changes).sort()[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;1;var s=t.changes[l];if("string"==typeof s&&s.includes("\n")){e.append(document.createElement("br")),e.append(document.createTextNode(n+l+":"));var c=s.trim().split("\n"),d=!0,f=!1,p=void 0;try{for(var y,m=c[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var h=y.value;e.append(document.createElement("br")),e.append(document.createTextNode("      "+h))}}catch(e){f=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw p}}}else if(Array.isArray(s))for(var b in s){var v=s[b];e.append(document.createElement("br")),e.append(document.createTextNode(n+l+"["+b+"]: "+JSON.stringify(v)))}else if("object"===k(s)){s.hasOwnProperty("old")&&s.hasOwnProperty("new")&&(e.append(document.createElement("br")),e.append(document.createTextNode(n+l+": "+JSON.stringify(s.old)+" â–º "+JSON.stringify(s.new))),delete s.old,delete s.new);var g=!0,_=!1,w=void 0;try{for(var T,S=Object.keys(s).sort()[Symbol.iterator]();!(g=(T=S.next()).done);g=!0){var O=T.value;e.append(document.createElement("br")),e.append(document.createTextNode(n+l+": "+O+": "+JSON.stringify(s[O])))}}catch(e){_=!0,w=e}finally{try{g||null==S.return||S.return()}finally{if(_)throw w}}}else e.append(document.createElement("br")),e.append(document.createTextNode(n+l+": "+JSON.stringify(s)))}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}}},{key:"getHighStateOutput",value:function(t){var n=[];Object.keys(t).forEach(function(e){t[e].___key___=e,n.push(t[e])}),n.sort(function(e,t){return e.__run_num__-t.__run_num__});for(var r=document.createElement("div"),o=0,i=0,a=0,u=0,l=0,s=0;s<n.length;s++){var c=n[s],d=document.createElement("div"),f=document.createElement("span");null===c.result?(f.style.color="yellow",f.innerText="âœ”",a+=1):c.result?(f.style.color="green",f.innerText="âœ”",o+=1):(f.style.color="red",f.innerText="âœ˜",i+=1),d.append(f),d.append(document.createTextNode(" ")),c.name?d.append(document.createTextNode(c.name)):d.append(document.createTextNode("(anonymous task)")),c.__id__&&c.__id__!==c.name&&d.append(document.createTextNode(" id="+encodeURIComponent(c.__id__))),c.__sls__&&d.append(document.createTextNode(" (from "+c.__sls__.replace(".","/")+".sls)"));var p=c.___key___.split("_|-");if(d.append(document.createElement("br")),d.append(document.createTextNode("    Function is "+p[0]+"."+p[3])),c.comment){d.append(document.createElement("br"));var y=c.comment;y=(y=y.replace(/[ \r\n]+$/g,"")).replace(/[\n]+/g,"\n    "),d.append(document.createTextNode("    "+y))}if(l+=e.addChangesInfo(d,c,"    "),c.hasOwnProperty("start_time")&&(d.append(document.createElement("br")),d.append(document.createTextNode("    Started at "+x.dateTimeStr(c.start_time)))),c.hasOwnProperty("duration")){var m=Math.round(c.duration);u+=m,m>=10&&(d.append(document.createElement("br")),d.append(document.createTextNode("    Duration "+e.getDurationClause(m))))}for(var h=Object.keys(c),b=0;b<h.length;b++){var v=h[b],g=c[v];"___key___"!==v&&("__id__"!==v&&"__sls__"!==v&&"__run_num__"!==v&&"changes"!==v&&"comment"!==v&&"duration"!==v&&"host"!==v&&"name"!==v&&"pchanges"!==v&&"result"!==v&&"start_time"!==v&&(d.append(document.createElement("br")),d.append(document.createTextNode("    "+v+" = "+JSON.stringify(g)))))}r.append(d)}var _="";o&&(_+=", "+o+" succeeded"),a&&(_+=", "+a+" skipped"),i&&(_+=", "+i+" failed");var w=o+a+i;return w!==o&&w!==a&&w!==i&&(_+=", "+(o+a+i)+" total"),1===l?_+=", "+l+" change":l&&(_+=", "+l+" changes"),w>1&&u>=10&&(_+=", "+e.getDurationClause(u)),_&&r.append(document.createTextNode(_.substring(2))),r}}],(n=null)&&O(t.prototype,n),r&&O(t,r),e}();function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"formatSimpleYAML",value:function(e){if(null===e)return"null";if(void 0===e)return"undefined";if("boolean"==typeof e)return e?"true":"false";if("string"==typeof e){var t=!1;return e.match(/^0[0-9]+$/)?e:(isNaN(Number(e))||(t=!0),e.match(/^$/)&&(t=!0),e.match(/^ /)&&(t=!0),e.match(/ $/)&&(t=!0),e.match(/^@/)&&(t=!0),e.match(/^`/)&&(t=!0),e.match(/^%/)&&(t=!0),e.match(/^[-a-z0-9_().\/:+ ]+$/i)||(t=!0),t?"'"+e+"'":e)}return"object"!==j(e)?""+e:Array.isArray(e)&&0===e.length?"[ ]":Array.isArray(e)||0!==Object.keys(e).length?null:"{ }"}},{key:"formatYAML",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.formatSimpleYAML(t);if(null!==r)return r;if(Array.isArray(t)){var o="",i="",a=!0,u=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;o+=i+"-Â "+e.formatYAML(d,n+2),i="\n"+" ".repeat(n)}}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}return o}var f="",p="",y=!0,m=!1,h=void 0;try{for(var b,v=Object.keys(t).sort()[Symbol.iterator]();!(y=(b=v.next()).done);y=!0){var g=b.value,_=t[g];f+=p+g+":";var w=e.formatSimpleYAML(_);null!==w?f+=" "+w:Array.isArray(_)?f+="\n"+" ".repeat(n)+e.formatYAML(_,n):"object"===j(_)?f+="\n"+" ".repeat(n+2)+e.formatYAML(_,n+2):f+="x"+e.formatYAML(_,n+2),p="\n"+" ".repeat(n)}}catch(e){m=!0,h=e}finally{try{y||null==v.return||v.return()}finally{if(m)throw h}}return f}}],(n=null)&&C(t.prototype,n),r&&C(t,r),e}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"isOutputFormatAllowed",value:function(e){var t=null;return window.localStorage&&(t=window.localStorage.getItem("output_formats")),"undefined"===t&&(t=null),null===t&&(t="doc,saltguihighstate,json"),t.includes(e)}},{key:"addVirtualMinion",value:function(e,t){return t.startsWith("runners.")?{RUNNER:e}:t.startsWith("wheel.")?{WHEEL:e}:e}},{key:"getHostnameHtml",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("span");return n.classList.add("hostname"),t&&n.classList.add(t),n.innerText=e,n}},{key:"getTextOutput",value:function(e){if((e=e.replace(/[ \r\n]+$/g,"")).match(patJid)){var t=document.createElement("a");return t.href="/job?id="+encodeURIComponent(e),t.innerText=e,t}var n=document.createElement("span");return n.innerText=e,n}},{key:"formatObject",value:function(t){return e.isOutputFormatAllowed("json")?_.formatJSON(t):e.isOutputFormatAllowed("yaml")?R.formatYAML(t):e.isOutputFormatAllowed("nested")?S.formatNESTED(t):_.formatJSON(t)}},{key:"getNormalOutput",value:function(t){var n=e.formatObject(t),r=document.createElement(n.includes("\n")?"div":"span");return r.innerText=n,r}},{key:"hasProperties",value:function(e,t){if(!e||"object"!==L(e))return!1;var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!e.hasOwnProperty(u))return!1}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return!0}},{key:"isAsyncOutput",value:function(e){var t=Object.keys(e);return 2===t.length&&("jid"===(t=t.sort())[0]&&"minions"===t[1])}},{key:"dateTimeStr",value:function(e){var t=window.localStorage.getItem("datetime_fraction_digits");if(null===t)return e;var n=Number.parseInt(t);if(isNaN(n))return e;n<0&&(n=0),n>6&&(n=6);var r=e.indexOf(".");return r<0?e:(0===n&&(r-=1),e.substring(0,r+n+1))}},{key:"addResponseOutput",value:function(t,n,r,o){if(t.innerText="","string"!=typeof(r=e.addVirtualMinion(r,o)))if("object"!==L(r)||Array.isArray(r))t.innerText=e.formatObject(r);else{var i=o.trim().replace(/^[a-z.]* */i,"");if(y.isDocumentationOutput(e,r,i))return y.reduceDocumentationOutput(r,i,i),void y.addDocumentationOutput(t,r);var a=document.createElement("div");if(!o.startsWith("runners.")&&!o.startsWith("wheel.")&&!e.isAsyncOutput(r)){var u,l=document.createElement("span"),s=Object.keys(r).length,c=n.length;u=1===s?s+" response":s+" responses",c!==s&&(u=u+", "+(c-s)+" no response"),s>0&&c!==s&&(u=u+", "+c+" total"),u+=" ",l.innerText=u,a.appendChild(l)}var d=document.createElement("span");d.innerText="â–½",d.style="cursor: pointer",a.appendChild(d),t.appendChild(a),d.addEventListener("click",function(e){"â–½"!==d.innerText?d.innerText="â–½":d.innerText="â–·";var n=!0,r=!1,o=void 0;try{for(var i,a=t.childNodes[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value.getElementsByClassName("triangle");if(1===u.length){var l=u[0];if(l!==d&&l.innerText!==d.innerText){var s=new MouseEvent("click",{});l.dispatchEvent(s)}}}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}});var f=0,p=!0,m=!1,h=void 0;try{for(var v,g=function(){var n=v.value,i=r[n];e.hasProperties(i,["retcode","return","success"])?i=i.return:o.startsWith("runner.")&&i&&i.hasOwnProperty("return")&&(i=i.return.return);var a=null,u=null,l=!1,s="host_success";r.hasOwnProperty(n)||(s="host_noresponse");var c=e.getHostnameHtml(n,s);l||r.hasOwnProperty(n)||(a=e.getTextOutput("(no response)"),l=!0),l||"string"!=typeof i||(a=e.getTextOutput(i),u=i.includes("\n"),l=!0),l||"object"===L(i)||(a=e.getNormalOutput(i),u=!1,l=!0),l||null!==i||(a=e.getNormalOutput(i),u=!1,l=!0),!l&&Array.isArray(i)&&(a=e.getNormalOutput(i),u=i.length>0,l=!0);var d=o.trim().replace(/ .*/,""),p=b.isHighStateOutput(d,i);!l&&p&&e.isOutputFormatAllowed("saltguihighstate")&&(c=E.getHighStateLabel(n,i),a=E.getHighStateOutput(i),u=!0,l=!0),!l&&p&&e.isOutputFormatAllowed("highstate")&&(c=b.getHighStateLabel(n,i),a=b.getHighStateOutput(i),u=!0,l=!0),l||(a=e.getNormalOutput(i),u=Object.keys(i).length>0),1===Object.keys(r).length&&(u=!1),u&&(f+=1);var y=document.createElement("div");y.append(c),y.appendChild(document.createTextNode(": "));var m=null;u&&((m=document.createElement("span")).innerText="â–½",m.style="cursor: pointer",m.classList.add("triangle"),y.appendChild(m),y.appendChild(document.createElement("br")),m.addEventListener("click",function(e){"â–½"!==m.innerText?(m.innerText="â–½",a.style.display=""):(m.innerText="â–·",a.style.display="none")})),y.append(a),t.append(y)},_=n.sort()[Symbol.iterator]();!(p=(v=_.next()).done);p=!0)g()}catch(e){m=!0,h=e}finally{try{p||null==_.return||_.return()}finally{if(m)throw h}}f<=1&&(d.style.display="none")}else t.innerText=r}}],(n=null)&&P(t.prototype,n),r&&P(t,r),e}();function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function t(e,n,r,o,i){var a,u,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u=this,(a=!(l=N(t).call(this,e,n,r,o,i))||"object"!==M(l)&&"function"!=typeof l?A(u):l)._runCommand=a._runCommand.bind(A(a)),a._runningJobs=a._runningJobs.bind(A(a)),a._updateJobs=a._updateJobs.bind(A(a)),a._updateMinions=a._updateMinions.bind(A(a)),a}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(t,i),n=t,(r=[{key:"_updateMinions",value:function(e){var t=e.return[0],n=this.getPageElement().querySelector("#minions"),r=Object.keys(t).sort();window.localStorage.setItem("minions",JSON.stringify(r));var o=!0,i=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value,c=t[s];!1===c?this._updateOfflineMinion(n,s):this._updateMinion(n,c,s)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}},{key:"_getElement",value:function(e,t){var n=document.getElementById(t);if(null===n)return(n=document.createElement("tr")).id=t,e.appendChild(n),n;for(;n.firstChild;)n.removeChild(n.firstChild);return n}},{key:"_updateOfflineMinion",value:function(e,t){var n=this._getElement(e,t);n.appendChild(i._createTd("hostname",t));var r=i._createTd("status","offline");r.classList.add("offline"),n.appendChild(r)}},{key:"_getBestIpNumber",value:function(e){if(!e)return null;var t=e.fqdn_ip4;if(!t)return null;if(!Array.isArray(t))return t;var n=!0,r=!1,o=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;if(!u.startsWith("127.")&&(!u.startsWith("10.")&&!u.startsWith("172.16.")&&!(u.startsWith("172.17.")||u.startsWith("172.18.")||u.startsWith("172.19.")||u.startsWith("172.20.")||u.startsWith("172.21.")||u.startsWith("172.22.")||u.startsWith("172.23.")||u.startsWith("172.24.")||u.startsWith("172.25.")||u.startsWith("172.26.")||u.startsWith("172.27.")||u.startsWith("172.28.")||u.startsWith("172.29.")||u.startsWith("172.30.")||u.startsWith("172.31.")||u.startsWith("192.168."))))return u}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}var l=!0,s=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if(!p.startsWith("127."))return p}}catch(e){s=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(s)throw c}}return t[0]}},{key:"_updateMinion",value:function(e,t,n){var r=this._getElement(e,n);r.appendChild(i._createTd("hostname",n));var o=this._getBestIpNumber(t);if(o){var a=i._createTd("status",o),u=o.split("."),l="";if(4===u.length){for(var s=0;s<4;s++)l+=u[s].padStart(3,"0");a.setAttribute("sorttable_customkey",l)}a.classList.add("address"),a.setAttribute("tabindex",-1),a.addEventListener("click",this._copyAddress),r.appendChild(a)}else{var c=i._createTd("status","accepted");c.classList.add("accepted"),r.appendChild(c)}var d="---";t&&t.saltversion&&(d=t.saltversion),t&&r.appendChild(i._createTd("saltversion",d));var f="---";if(t&&t.os&&t.osrelease?f=t.os+" "+t.osrelease:t&&t.os&&(f=t.os),t){var p=i._createTd("os",f);if(t.os){var y=document.createElement("img");y.setAttribute("src","static/images/os-"+t.os.replace(" ","-").toLowerCase()+".png"),y.classList.add("osimage"),p.prepend(y)}r.appendChild(p)}}},{key:"_addMinion",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=document.getElementById(t);if(null===r){(r=document.createElement("tr")).id=t,r.appendChild(i._createTd("hostname",t));var o=i._createTd("status","accepted");for(o.classList.add("accepted"),r.appendChild(o),r.appendChild(i._createTd("os","loading..."));r.cells.length<e.tHead.rows[0].cells.length-n;)r.appendChild(i._createTd("",""));e.tBodies[0].appendChild(r)}}},{key:"_addNone",value:function(e){var t=document.createElement("tr"),n=i._createTd("hostname","none");n.setAttribute("colspan",e.rows[0].cells.length),t.appendChild(n),e.appendChild(t)}},{key:"_updateJobs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.getPageElement().querySelector(".jobs tbody"),o=this._jobsToArray(e.return[0]);this._sortJobs(o);for(var i=0,a=0;i<t&&void 0!==o[a];){var u=o[a];a+=1,"grains.append"!==u.Function&&("grains.delkey"!==u.Function&&"grains.delval"!==u.Function&&"grains.items"!==u.Function&&"grains.setval"!==u.Function&&"pillar.items"!==u.Function&&"pillar.obfuscate"!==u.Function&&"runner.jobs.active"!==u.Function&&"runner.jobs.list_job"!==u.Function&&"runner.jobs.list_jobs"!==u.Function&&"saltutil.find_job"!==u.Function&&"saltutil.refresh_grains"!==u.Function&&"saltutil.refresh_pillar"!==u.Function&&"saltutil.running"!==u.Function&&"schedule.delete"!==u.Function&&"schedule.disable"!==u.Function&&"schedule.disable_job"!==u.Function&&"schedule.enable"!==u.Function&&"schedule.enable_job"!==u.Function&&"schedule.list"!==u.Function&&"schedule.modify"!==u.Function&&"schedule.run_job"!==u.Function&&"sys.doc"!==u.Function&&"wheel.config.values"!==u.Function&&"wheel.key.accept"!==u.Function&&"wheel.key.delete"!==u.Function&&"wheel.key.list_all"!==u.Function&&"wheel.key.reject"!==u.Function&&"wheel.key.finger"!==u.Function&&(!0===n?this._addDetailedJob(r,u):this._addJob(r,u),i+=1))}this.jobsLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_runningJobs",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.return[0];for(var r in n){var o=n[r],i="",a=void 0;!0===t?a=document.querySelector(".jobs #job"+r+" .status"):(i=window.makeTargetText(o["Target-type"],o.Target)+", ",a=document.querySelector(".jobs #job"+r+" .target")),o.Running.length>0&&(i=i+o.Running.length+" running"),o.Returned.length>0&&(i=i+", "+o.Returned.length+" returned"),a&&(a.classList.remove("no_status"),a.innerText=i)}var u=!0,l=!1,s=void 0;try{for(var c,d=document.querySelector("table#jobs tbody").rows[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=c.value.querySelector(".no_status");f&&(f.classList.remove("no_status"),f.innerText="done")}}catch(e){l=!0,s=e}finally{try{u||null==d.return||d.return()}finally{if(l)throw s}}}},{key:"_addJob",value:function(e,t){var n=document.createElement("tr"),r=document.createElement("td");r.id="job"+t.id;var o=window.makeTargetText(t["Target-type"],t.Target);r.appendChild(i._createDiv("target",o));var a=t.Function;r.appendChild(i._createDiv("function",a));var u=x.dateTimeStr(t.StartTime);r.appendChild(i._createDiv("time",u)),n.appendChild(r),new DropDownMenu(n).addMenuItem("Show&nbsp;details",function(e){window.location.assign("/job?id="+encodeURIComponent(t.id))}.bind(this)),e.appendChild(n),n.addEventListener("click",this._createJobListener(t.id))}},{key:"_addDetailedJob",value:function(e,t){var n=document.createElement("tr");n.id="job"+t.id;var r=t.id;n.appendChild(i._createTd("job"+t.id,r));var o=window.makeTargetText(t["Target-type"],t.Target);o.length>50&&(o=o.substring(0,50)+"..."),n.appendChild(i._createTd("target",o));var a=this._decodeArgumentsText(t.Arguments[0]),u=t.Function+" "+a;u.length>50&&(u=u.substring(0,50)+"..."),n.appendChild(i._createTd("function",u));var l=t.StartTime;n.appendChild(i._createTd("starttime",l));var s=new DropDownMenu(n);s.addMenuItem("Show&nbsp;details",function(e){window.location.assign("/job?id="+encodeURIComponent(t.id))}.bind(this)),s.addMenuItem("Re-run&nbsp;job...",function(e){this._runFullCommand(e,t["Target-type"],t.Target,u)}.bind(this));var c=i._createTd("status","loading...");for(c.classList.add("no_status"),n.appendChild(c);n.cells.length<e.parentElement.tHead.rows[0].cells.length;)n.appendChild(i._createTd("",""));e.appendChild(n),n.addEventListener("click",function(e){return window.location.assign("/job?id="+encodeURIComponent(t.id))})}},{key:"_createJobListener",value:function(e){var t=this.router;return function(){t.goTo("/job?id="+encodeURIComponent(e))}}},{key:"_jobsToArray",value:function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++){var o=t[r],i=e[o];i.id=o,n.push(i)}return n}},{key:"_sortJobs",value:function(e){e.sort(function(e,t){return e.id<t.id?1:e.id>t.id?-1:0})}},{key:"_copyAddress",value:function(e){var t=e.target,n=window.getSelection(),r=document.createRange();r.selectNodeContents(t),n.removeAllRanges(),n.addRange(r),document.execCommand("copy"),e.stopPropagation()}}])&&I(n.prototype,r),o&&I(n,o),t}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=this.callback.bind(this),this.verifyAll=this.verifyAll.bind(this),"TR"===t.tagName){var n=i._createTd("","");t.appendChild(n),t=n}switch(this.menuDropdown=i._createDiv("run-command-button",""),t.id){case"cmdbox":this.menuButton=i._createDiv("menu-dropdown","ðŸ“–"),this.verifyAll();break;default:this.menuButton=i._createDiv("menu-dropdown","â‰¡"),this.verifyAll()}this.menuDropdown.appendChild(this.menuButton),this.menuDropdownContent=i._createDiv("menu-dropdown-content",""),this.menuDropdown.appendChild(this.menuDropdownContent),this.menuDropdown.addEventListener("mouseenter",this.verifyAll),t.appendChild(this.menuDropdown)}var t,n,r;return t=e,(n=[{key:"verifyAll",value:function(){var e=0;if(this.menuDropdownContent){var t=!0,n=!1,r=void 0;try{for(var o,i=this.menuDropdownContent.children[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value,u=a.verifyCallback;u&&u(a),"none"!==a.style.display&&e++}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}var l="TD"===this.menuDropdown.tagName?"table-cell":"inline-block";this.menuDropdown.style.display=e>0?l:"none"}},{key:"addMenuItem",value:function(e,t,n){var r=this,o=i._createDiv("run-command-button","...");"string"==typeof e?o.innerHTML=e:o.verifyCallback=e,o.addEventListener("click",function(e){return r.callback(e,t,n)}),this.menuDropdownContent.appendChild(o),this.verifyAll()}},{key:"callback",value:function(e,t,n){this._value=n,t(e)}},{key:"setTitle",value:function(e){this.menuButton.innerHTML=e+"&nbsp;â–¼"}},{key:"showMenu",value:function(){this.menuDropdown.style.display="inline-block"}},{key:"hideMenu",value:function(){this.menuDropdown.style.display="none"}}])&&q(t.prototype,n),r&&q(t,r),e}();function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return(H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=K(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var G=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=K(t).call(this,"^[/]$","Minions","#page_minions","#button_minions",e))||"object"!==B(o)&&"function"!=typeof o?$(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._updateKeys=n._updateKeys.bind($(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.keysLoaded&&e.jobsLoaded&&t(),e.router.api.getLocalGrainsItems(null).then(e._updateMinions),e.router.api.getWheelKeyListAll().then(e._updateKeys),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs),e.router.api.getWheelConfigValues().then(e._configvalues)})}},{key:"_configvalues",value:function(e){var t=e.return[0].data.return.saltgui_templates;window.localStorage.setItem("templates",JSON.stringify(t));var n=e.return[0].data.return.saltgui_public_pillars;window.localStorage.setItem("public_pillars",JSON.stringify(n));var r=e.return[0].data.return.saltgui_preview_grains;window.localStorage.setItem("preview_grains",JSON.stringify(r));var o=e.return[0].data.return.nodegroups;o||(o={}),window.localStorage.setItem("nodegroups",JSON.stringify(o));var i=e.return[0].data.return.saltgui_output_formats;window.localStorage.setItem("output_formats",JSON.stringify(i));var a=e.return[0].data.return.saltgui_datetime_fraction_digits;window.localStorage.setItem("datetime_fraction_digits",JSON.stringify(a))}},{key:"_updateKeys",value:function(e){var t=this,n=e.return[0].data.return,r=this.getPageElement().querySelector("#minions"),o=n.minions.sort(),i=!0,a=!1,u=void 0;try{for(var l,s=function(){var e=l.value;t._addMinion(r,e,1);var n=document.getElementById(e),o=new F(n);t._addMenuItemStateApply(o,e),n.addEventListener("click",function(n){return t._runCommand(n,e,"state.apply")})},c=o[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)s()}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}this.keysLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_updateOfflineMinion",value:function(e,n){H(K(t.prototype),"_updateOfflineMinion",this).call(this,e,n);var r=document.getElementById(n);r.appendChild(i._createTd("saltversion","")),r.appendChild(i._createTd("os","")),r.appendChild(i._createTd("run-command-button",""))}},{key:"_updateMinion",value:function(e,n,r){var o=this;H(K(t.prototype),"_updateMinion",this).call(this,e,n,r);var i=document.getElementById(r),a=new F(i);this._addMenuItemStateApply(a,r),i.addEventListener("click",function(e){return o._runCommand(e,r,"state.apply")})}},{key:"_addMenuItemStateApply",value:function(e,t){e.addMenuItem("Apply&nbsp;state...",function(e){this._runCommand(e,t,"state.apply")}.bind(this))}}])&&W(n.prototype,r),o&&W(n,o),t}();function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e,t,n){return(z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=X(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=X(t).call(this,"^[/]keys$","Keys","#page_keys","#button_keys",e))||"object"!==Y(o)&&"function"!=typeof o?V(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._updateKeys=n._updateKeys.bind(V(n)),n._updateKeysFingerprint=n._updateKeysFingerprint.bind(V(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this,t=e.router.api.getWheelKeyListAll(),n=e.router.api.getWheelKeyFinger();return Promise.all([t,n]).then(function(t){e._updateKeys(t[0]),e._updateKeysFingerprint(t[1])}),new Promise(function(t,n){e.resolvePromise=t,e.keysLoaded&&e.jobsLoaded&&t(),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_updateKeysFingerprint",value:function(e){for(var t=e.return[0].data.return,n=Object.keys(t),r=0;r<n.length;r++){var o=n[r];if("local"!==o)for(var a=t[o],u=Object.keys(a),l=0;l<u.length;l++){var s=u[l],c=document.querySelector("#"+s+" .os");c&&(c.parentElement.insertBefore(i._createTd("fingerprint",""),c),c.parentElement.removeChild(c));var d=document.querySelector("#"+s+" .fingerprint"),f=a[s];d&&(d.innerText=f)}}}},{key:"_updateKeys",value:function(e){var t=e.return[0].data.return,n=this.getPageElement().querySelector("#minions"),r=t.minions_pre.sort(),o=!0,a=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;this._addPreMinion(n,c)}}catch(e){a=!0,u=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw u}}var d=t.minions.sort(),f=!0,p=!1,y=void 0;try{for(var m,h=d[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var b=m.value;this._addMinion(n,b,1);var v=document.getElementById(b),g=new F(v);this._addMenuItemReject(g,b," include_accepted=true"),this._addMenuItemDelete(g,b,"")}}catch(e){p=!0,y=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw y}}var _=t.minions_denied.sort(),w=!0,T=!1,S=void 0;try{for(var k,O=_[Symbol.iterator]();!(w=(k=O.next()).done);w=!0){var E=k.value;this._addDeniedMinion(n,E)}}catch(e){T=!0,S=e}finally{try{w||null==O.return||O.return()}finally{if(T)throw S}}var j=t.minions_rejected.sort(),C=!0,R=!1,L=void 0;try{for(var P,x=j[Symbol.iterator]();!(C=(P=x.next()).done);C=!0){var M=P.value;this._addRejectedMinion(n,M)}}catch(e){R=!0,L=e}finally{try{C||null==x.return||x.return()}finally{if(R)throw L}}var I="";if(0===r.length&&(I+=", no unaccepted keys"),0===d.length&&(I+=", no accepted keys"),0===_.length&&(I+=", no denied keys"),0===j.length&&(I+=", no rejected keys"),I){var N=i._createDiv("msg",I.replace(/, n/,"N"));this.getPageElement().querySelector(".minion-list").appendChild(N)}this.keysLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_updateOfflineMinion",value:function(e,n){z(X(t.prototype),"_updateOfflineMinion",this).call(this,e,n);var r=document.getElementById(n);r.appendChild(i._createTd("fingerprint",""));var o=new F(r);this._addMenuItemReject(o,n," include_accepted=true"),this._addMenuItemDelete(o,n,"")}},{key:"_addRejectedMinion",value:function(e,t){var n=this._getElement(e,t);n.appendChild(i._createTd("hostname",t));var r=i._createTd("status","rejected");r.classList.add("rejected"),n.appendChild(r),n.appendChild(i._createTd("fingerprint",""));var o=new F(n);this._addMenuItemDelete(o,t,""),this._addMenuItemAccept(o,t," include_rejected=true"),e.tBodies[0].appendChild(n)}},{key:"_addDeniedMinion",value:function(e,t){var n=this._getElement(e,t);n.appendChild(i._createTd("hostname",t));var r=i._createTd("status","denied");r.classList.add("denied"),n.appendChild(r),n.appendChild(i._createTd("fingerprint",""));var o=new F(n);this._addMenuItemAccept(o,t," include_denied=true"),this._addMenuItemReject(o,t," include_denied=true"),this._addMenuItemDelete(o,t,""),e.tBodies[0].appendChild(n)}},{key:"_addPreMinion",value:function(e,t){var n=this._getElement(e,t);n.appendChild(i._createTd("hostname",t));var r=i._createTd("status","unaccepted");r.classList.add("unaccepted"),n.appendChild(r),n.appendChild(i._createTd("fingerprint",""));var o=new F(n);this._addMenuItemAccept(o,t,""),this._addMenuItemReject(o,t,""),this._addMenuItemDelete(o,t,""),e.tBodies[0].appendChild(n)}},{key:"_addMenuItemAccept",value:function(e,t,n){e.addMenuItem("Accept&nbsp;key...",function(e){this._runCommand(e,t,"wheel.key.accept"+n)}.bind(this))}},{key:"_addMenuItemReject",value:function(e,t,n){e.addMenuItem("Reject&nbsp;key...",function(e){this._runCommand(e,t,"wheel.key.reject"+n)}.bind(this))}},{key:"_addMenuItemDelete",value:function(e,t,n){e.addMenuItem("Delete&nbsp;key...",function(e){this._runCommand(e,t,"wheel.key.delete"+n)}.bind(this))}}])&&Q(n.prototype,r),o&&Q(n,o),t}();function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t,n){return(oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ie(t).call(this,"^[/]grains$","Grains","#page_grains","#button_grains",e))||"object"!==te(o)&&"function"!=typeof o?re(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._updateKeys=n._updateKeys.bind(re(n)),n._updateMinion=n._updateMinion.bind(re(n));var i=window.localStorage.getItem("preview_grains");i&&"undefined"!==i||(i="[]"),n._previewGrains=JSON.parse(i),Array.isArray(n._previewGrains)||(n._previewGrains=[]);for(var a=document.querySelector("#page_grains thead tr");a.childElementCount>6;)a.removeChild(a.lastChild);for(var u=0;u<n._previewGrains.length;u++){var l=document.createElement("th");l.innerText=n._previewGrains[u],a.appendChild(l)}var s=document.querySelector("#page_grains table thead"),c=s.cloneNode(!0);return s.parentNode.replaceChild(c,s),sorttable.makeSortable(document.querySelector("#page_grains table")),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.keysLoaded&&e.jobsLoaded&&t(),e.router.api.getLocalGrainsItems(null).then(e._updateMinions),e.router.api.getWheelKeyListAll().then(e._updateKeys),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_updateKeys",value:function(e){var t=this,n=e.return[0].data.return,r=this.getPageElement().querySelector("#minions"),o=n.minions.sort(),a=!0,u=!1,l=void 0;try{for(var s,c=function(){var e=s.value;t._addMinion(r,e,1+t._previewGrains.length);var n=document.getElementById(e),o=new F(n);t._addMenuItemShowGrains(o,e);for(var a=0;a<t._previewGrains.length;a++)n.appendChild(i._createTd("",""));n.addEventListener("click",function(t){return window.location.assign("grainsminion?minion="+encodeURIComponent(e))})},d=o[Symbol.iterator]();!(a=(s=d.next()).done);a=!0)c()}catch(e){u=!0,l=e}finally{try{a||null==d.return||d.return()}finally{if(u)throw l}}this.keysLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_updateOfflineMinion",value:function(e,n){oe(ie(t.prototype),"_updateOfflineMinion",this).call(this,e,n);var r=document.getElementById(n);r.appendChild(i._createTd("saltversion","")),r.appendChild(i._createTd("os","")),r.appendChild(i._createTd("graininfo","")),r.appendChild(i._createTd("run-command-button",""));for(var o=0;o<this._previewGrains.length;o++)r.appendChild(i._createTd("",""))}},{key:"_updateMinion",value:function(e,n,r){oe(ie(t.prototype),"_updateMinion",this).call(this,e,n,r);var o=document.getElementById(r),a=Object.keys(n).length,u=a+" grains",l=i._createTd("graininfo",u);l.setAttribute("sorttable_customkey",a),o.appendChild(l);var s=new F(o);for(this._addMenuItemShowGrains(s,r);o.childElementCount>6;)o.removeChild(o.lastChild);for(var c=0;c<this._previewGrains.length;c++){var d=document.createElement("td"),f=this._previewGrains[c];f in n&&(d.innerText=x.formatObject(n[f]),d.classList.add("grain_value")),o.appendChild(d)}o.addEventListener("click",function(e){return window.location.assign("grainsminion?minion="+encodeURIComponent(r))})}},{key:"_addMenuItemShowGrains",value:function(e,t){e.addMenuItem("Show&nbsp;grains",function(e){window.location.assign("grainsminion?minion="+encodeURIComponent(t))}.bind(this))}}])&&ne(n.prototype,r),o&&ne(n,o),t}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=ce(t).call(this,"^[/]grainsminion$","Grains","#page_grainsminion","#button_grains",e),(n=!o||"object"!==le(o)&&"function"!=typeof o?de(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._showGrains=n._showGrains.bind(de(n)),document.querySelector("#button_close_grainsminion").addEventListener("click",function(e){n.router.goTo("/grains")}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this,t=decodeURIComponent(window.getQueryParam("minion"));return document.getElementById("grainsminion_title").innerText="Grains on "+t,new Promise(function(n,r){e.resolvePromise=n,e.keysLoaded&&e.jobsLoaded&&n(),e.router.api.getLocalGrainsItems(t).then(e._showGrains),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_showGrains",value:function(e){var t=this,n=decodeURIComponent(window.getQueryParam("minion")),r=e.return[0][n],o=document.getElementById("grainsminion_page"),a=new F(o);a.addMenuItem("Add&nbsp;grain...",function(e){this._runCommand(e,n,'grains.setval "name" "value"')}.bind(this)),a.addMenuItem("Refresh&nbsp;grains...",function(e){this._runCommand(e,n,"saltutil.refresh_grains")}.bind(this));var u=document.getElementById("grainsminion_list");for(o.appendChild(u);u.tBodies[0].rows.length>0;)u.tBodies[0].deleteRow(0);if(r){var l=Object.keys(r).sort(),s=!0,c=!1,d=void 0;try{for(var f,p=function(){var e=f.value,o=document.createElement("tr"),a=i._createTd("grain_name",e);o.appendChild(a);var l=x.formatObject(r[e]),s=new F(o);s.addMenuItem("Edit&nbsp;grain...",function(t){this._runCommand(t,n,'grains.setval "'+e+'" '+JSON.stringify(r[e]))}.bind(t)),l.startsWith("[")&&s.addMenuItem("Add&nbsp;value...",function(t){this._runCommand(t,n,'grains.append "'+e+'" "value"')}.bind(t)),s.addMenuItem("Delete&nbsp;key...",function(t){this._runCommand(t,n,'grains.delkey "'+e+'"')}.bind(t)),s.addMenuItem("Delete&nbsp;value...",function(t){this._runCommand(t,n,'grains.delval "'+e+'"')}.bind(t));var c=i._createTd("grain_value",l);o.appendChild(c),u.tBodies[0].appendChild(o),o.addEventListener("click",function(o){return t._runCommand(o,n,'grains.setval "'+e+'" '+JSON.stringify(r[e]))})},y=l[Symbol.iterator]();!(s=(f=y.next()).done);s=!0)p()}catch(e){c=!0,d=e}finally{try{s||null==y.return||y.return()}finally{if(c)throw d}}}}}])&&se(n.prototype,r),o&&se(n,o),t}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e,t,n){return(be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ve(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=ve(t).call(this,"^[/]schedules$","Schedules","#page_schedules","#button_schedules",e))||"object"!==ye(o)&&"function"!=typeof o?he(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._updateKeys=n._updateKeys.bind(he(n)),n._updateMinion=n._updateMinion.bind(he(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,D),n=t,o=[{key:"_fixMinion",value:function(e){var t={schedules:{},enabled:!0};for(var n in e)"enabled"!==n?"schedule"===n&&"{}"===JSON.stringify(e[n])||(t.schedules[n]=e[n]):t.enabled=e.enabled;return t}}],(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.keysLoaded&&e.jobsLoaded&&t(),e.router.api.getLocalScheduleList(null).then(e._updateMinions,e._updateMinions),e.router.api.getWheelKeyListAll().then(e._updateKeys),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_updateKeys",value:function(e){var t=this,n=e.return[0].data.return,r=this.getPageElement().querySelector("#minions"),o=n.minions.sort(),i=!0,a=!1,u=void 0;try{for(var l,s=function(){var e=l.value;t._addMinion(r,e,1);var n=document.getElementById(e),o=new DropDownMenu(n);t._addMenuItemShowSchedules(o,e),n.addEventListener("click",function(t){return window.location.assign("schedulesminion?minion="+encodeURIComponent(e))})},c=o[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)s()}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}this.keysLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_updateOfflineMinion",value:function(e,n){be(ve(t.prototype),"_updateOfflineMinion",this).call(this,e,n);var r=document.getElementById(n);r.appendChild(i._createTd("scheduleinfo","")),r.appendChild(i._createTd("run-command-button",""))}},{key:"_updateMinion",value:function(e,n,r){n=t._fixMinion(n);var o=Object.keys(n.schedules).length,a=o+" schedule"+(1===o?"":"s");n.enabled||(a+=" (disabled)");var u=document.getElementById(r);for(null===u&&((u=document.createElement("tr")).id=r,e.appendChild(u));u.firstChild;)u.removeChild(u.firstChild);u.appendChild(i._createTd("hostname",r));var l=i._createTd("status","accepted");l.classList.add("accepted"),u.appendChild(l);var s=i._createTd("scheduleinfo",a);s.setAttribute("sorttable_customkey",o),u.appendChild(s);var c=new DropDownMenu(u);this._addMenuItemShowSchedules(c,r),u.addEventListener("click",function(e){return window.location.assign("schedulesminion?minion="+encodeURIComponent(r))})}},{key:"_addMenuItemShowSchedules",value:function(e,t){e.addMenuItem("Show&nbsp;schedules",function(e){window.location.assign("schedulesminion?minion="+encodeURIComponent(t))}.bind(this))}}])&&me(n.prototype,r),o&&me(n,o),t}();function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ee=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Se(t).call(this,"^[/]schedulesminion$","Schedules","#page_schedulesminion","#button_schedules",e),(n=!o||"object"!==we(o)&&"function"!=typeof o?ke(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._showSchedules=n._showSchedules.bind(ke(n)),document.querySelector("#button_close_schedulesminion").addEventListener("click",function(e){n.router.goTo("/schedules")}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this,t=decodeURIComponent(window.getQueryParam("minion"));return document.getElementById("schedulesminion_title").innerText="Schedules on "+t,new Promise(function(n,r){e.resolvePromise=n,e.keysLoaded&&e.jobsLoaded&&n(),e.router.api.getLocalScheduleList(t).then(e._showSchedules),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_showSchedules",value:function(e){var t=this,n=decodeURIComponent(window.getQueryParam("minion")),r=e.return[0][n];r=SchedulesRoute._fixMinion(r);var o=document.getElementById("schedulesminion_title"),a="Schedules on "+n;r.enabled||(a+=" (disabled)"),o.innerText=a;var u=document.getElementById("schedulesminion_page"),l=new DropDownMenu(u);l.addMenuItem("Enable&nbsp;scheduler...",function(e){this._runCommand(e,n,"schedule.enable")}.bind(this)),l.addMenuItem("Disable&nbsp;scheduler...",function(e){this._runCommand(e,n,"schedule.disable")}.bind(this));var s=document.getElementById("schedulesminion_list");for(u.append(s);s.tBodies[0].rows.length>0;)s.tBodies[0].deleteRow(0);if(r){var c=Object.keys(r.schedules).sort(),d=!0,f=!1,p=void 0;try{for(var y,m=function(){var e=y.value,o=r.schedules[e];"name"in o&&delete o.name,"enabled"in o&&o.enabled&&delete o.enabled,"jid_include"in o&&o.jid_include&&delete o.jid_include,"maxrunning"in o&&1===o.maxrunning&&delete o.maxrunning;var a=document.createElement("tr"),u=i._createTd("schedule_name",e);a.appendChild(u);var l=o.hasOwnProperty("enabled")&&!o.enabled,c=new DropDownMenu(a),d="schedule.modify "+e;for(var f in o)d=d+" "+f+"="+JSON.stringify(o[f]);c.addMenuItem("Modify&nbsp;job...",function(e){this._runCommand(e,n,d)}.bind(t)),c.addMenuItem("Enable&nbsp;job...",function(t){this._runCommand(t,n,"schedule.enable_job "+e)}.bind(t)),c.addMenuItem("Disable&nbsp;job...",function(t){this._runCommand(t,n,"schedule.disable_job "+e)}.bind(t)),c.addMenuItem("Delete&nbsp;job...",function(t){this._runCommand(t,n,"schedule.delete "+e)}.bind(t)),c.addMenuItem("Run&nbsp;job...",function(t){var r="schedule.run_job";l&&(r+=" force=true"),r+=" "+e,this._runCommand(t,n,r)}.bind(t));var p=x.formatObject(o),m=i._createTd("schedule_value",p);l&&m.classList.add("disabled_schedule"),a.appendChild(m),s.tBodies[0].appendChild(a),a.addEventListener("click",function(e){return t._runCommand(e,n,d)})},h=c[Symbol.iterator]();!(d=(y=h.next()).done);d=!0)m()}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}if(!c.length){var b=i._createDiv("msg","No schedules found");s.tBodies[0].appendChild(b)}}}}])&&Te(n.prototype,r),o&&Te(n,o),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t,n){return(Le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pe(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Me=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Pe(t).call(this,"^[/]pillars$","Pillars","#page_pillars","#button_pillars",e))||"object"!==je(o)&&"function"!=typeof o?Re(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._updateKeys=n._updateKeys.bind(Re(n)),n._updateMinion=n._updateMinion.bind(Re(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.keysLoaded&&e.jobsLoaded&&t(),e.router.api.getLocalPillarObfuscate(null).then(e._updateMinions),e.router.api.getWheelKeyListAll().then(e._updateKeys),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_updateKeys",value:function(e){var t=this,n=e.return[0].data.return,r=this.getPageElement().querySelector("#minions"),o=n.minions.sort(),i=!0,a=!1,u=void 0;try{for(var l,s=function(){var e=l.value;t._addMinion(r,e,1);var n=document.getElementById(e),o=new F(n);t._addMenuItemShowPillars(o,e),n.addEventListener("click",function(t){return window.location.assign("pillarsminion?minion="+encodeURIComponent(e))})},c=o[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)s()}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}this.keysLoaded=!0,this.keysLoaded&&this.jobsLoaded&&this.resolvePromise()}},{key:"_updateOfflineMinion",value:function(e,n){Le(Pe(t.prototype),"_updateOfflineMinion",this).call(this,e,n);var r=document.getElementById(n);r.appendChild(i._createTd("pillarinfo","")),r.appendChild(i._createTd("run-command-button",""))}},{key:"_updateMinion",value:function(e,n,r){Le(Pe(t.prototype),"_updateMinion",this).call(this,e,null,r);var o,a=document.getElementById(r),u=Object.keys(n).length;o=0===u?"No pillars":1===u?u+" pillar":u+" pillars";var l=i._createTd("pillarinfo",o);l.setAttribute("sorttable_customkey",u),a.appendChild(l);var s=new F(a);this._addMenuItemShowPillars(s,r),a.addEventListener("click",function(e){return window.location.assign("pillarsminion?minion="+encodeURIComponent(r))})}},{key:"_addMenuItemShowPillars",value:function(e,t){e.addMenuItem("Show&nbsp;pillars",function(e){window.location.assign("pillarsminion?minion="+encodeURIComponent(t))}.bind(this))}}])&&Ce(n.prototype,r),o&&Ce(n,o),t}();function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=Ae(t).call(this,"^[/]pillarsminion$","Pillars","#page_pillarsminion","#button_pillars",e),(n=!o||"object"!==Ie(o)&&"function"!=typeof o?Je(r):o).keysLoaded=!1,n.jobsLoaded=!1,n._showPillars=n._showPillars.bind(Je(n)),document.querySelector("#button_close_pillarsminion").addEventListener("click",function(e){n.router.goTo("/pillars")}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this,t=decodeURIComponent(window.getQueryParam("minion"));return document.getElementById("pillarsminion_title").innerText="Pillars on "+t,new Promise(function(n,r){e.resolvePromise=n,e.keysLoaded&&e.jobsLoaded&&n(),e.router.api.getLocalPillarItems(t).then(e._showPillars),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs)})}},{key:"_showPillars",value:function(e){var t=decodeURIComponent(window.getQueryParam("minion")),n=e.return[0][t],r=document.getElementById("pillarsminion_page"),o=new F(r);this._addMenuItemRefreshPillar(o,t);var a=document.getElementById("pillarsminion_list");for(r.appendChild(a);a.tBodies[0].rows.length>0;)a.tBodies[0].deleteRow(0);if(n){var u=window.localStorage.getItem("public_pillars");u&&"undefined"!==u||(u="[]");var l=JSON.parse(u);Array.isArray(l)||(l=[]);for(var s=0;s<l.length;s++)try{l[s]=new RegExp(l[s])}catch(e){l[s]=null}var c=Object.keys(n).sort(),d=!0,f=!1,p=void 0;try{for(var y,m=function(){var e=y.value,t=document.createElement("tr"),r=i._createTd("pillar_name",e);t.appendChild(r);var o=i._createTd("pillar_hidden","â—â—â—â—â—â—â—â—");t.appendChild(o);var u=x.formatObject(n[e]),s=i._createTd("pillar_shown",u);s.style.display="none",t.appendChild(s);for(var c=0;c<l.length;c++)if(l[c]&&l[c].test(e)){o.style.display="none",s.style.display="";break}o.addEventListener("click",function(e){o.style.display="none",s.style.display=""}),s.addEventListener("click",function(e){s.style.display="none",o.style.display=""}),a.tBodies[0].appendChild(t)},h=c[Symbol.iterator]();!(d=(y=h.next()).done);d=!0)m()}catch(e){f=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(f)throw p}}if(!c.length){var b=i._createTd("msg","No pillars found");a.tBodies[0].appendChild(b)}}}},{key:"_addMenuItemRefreshPillar",value:function(e,t){e.addMenuItem("Refresh&nbsp;pillar...",function(e){this._runCommand(e,t,"saltutil.refresh_pillar")}.bind(this))}}])&&Ne(n.prototype,r),o&&Ne(n,o),t}();function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=We(t).call(this,"^[/]job$","Job","#page_job","",e))||"object"!==Fe(o)&&"function"!=typeof o?$e(r):o)._onJobData=n._onJobData.bind($e(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,i),n=t,(r=[{key:"onShow",value:function(){var e=this,t=decodeURIComponent(window.getQueryParam("id"));return new Promise(function(n,r){e.resolvePromise=n,e.router.api.getRunnerJobsListJob(t).then(e._onJobData)})}},{key:"_isResultOk",value:function(e){return!!e.success&&0===e.retcode}},{key:"_onJobData",value:function(e){var t=this,n=e.return[0];this.getPageElement().querySelector(".output").innerText="",document.querySelector("#button_close_job").addEventListener("click",function(e){t.router.goTo("/jobs")});var r=this._decodeArgumentsText(n.Arguments[0]),o=n.Function+" "+r,i=document.getElementById("job_page"),a=i.querySelector(".job_menu"),u=new DropDownMenu(a);u.addMenuItem("Re-run&nbsp;job...",function(e){this._runFullCommand(e,n["Target-type"],n.Target,o)}.bind(this));var l="";if(n.Minions){var s=!0,c=!1,d=void 0;try{for(var f,p=n.Minions[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){l+=","+f.value}}catch(e){c=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(c)throw d}}}if(l&&l===","+n.Minions[0]&&(l=null),l){var y=l.substring(1);u.addMenuItem("Re-run&nbsp;job&nbsp;on&nbsp;all&nbsp;minions...",function(e){this._runFullCommand(e,"list",y,o)}.bind(this))}l="";var m=!1,h=!1;if(n.Minions){var b=!0,v=!1,g=void 0;try{for(var _,w=n.Minions[Symbol.iterator]();!(b=(_=w.next()).done);b=!0){var T=_.value;T in n.Result||(m=!0),T in n.Result&&!this._isResultOk(n.Result[T])&&(h=!0),T in n.Result&&this._isResultOk(n.Result[T])||(l+=","+T)}}catch(e){v=!0,g=e}finally{try{b||null==w.return||w.return()}finally{if(v)throw g}}}if(m&&h&&l){var S=l.substring(1);u.addMenuItem("Re-run&nbsp;job&nbsp;on&nbsp;unsuccessful&nbsp;minions...",function(e){this._runFullCommand(e,"list",S,o)}.bind(this))}if(l="",n.Minions){var k=!0,O=!1,E=void 0;try{for(var j,C=n.Minions[Symbol.iterator]();!(k=(j=C.next()).done);k=!0){var R=j.value;R in n.Result&&!this._isResultOk(n.Result[R])&&(l+=","+R)}}catch(e){O=!0,E=e}finally{try{k||null==C.return||C.return()}finally{if(O)throw E}}}if(l){var L=l.substring(1);u.addMenuItem("Re-run&nbsp;job&nbsp;on&nbsp;failed&nbsp;minions...",function(e){this._runFullCommand(e,"list",L,o)}.bind(this))}if(l="",n.Minions){var P=!0,M=!1,I=void 0;try{for(var N,A=n.Minions[Symbol.iterator]();!(P=(N=A.next()).done);P=!0){var J=N.value;J in n.Result||(l+=","+J)}}catch(e){M=!0,I=e}finally{try{P||null==A.return||A.return()}finally{if(M)throw I}}}if(l){var D=l.substring(1);u.addMenuItem("Re-run&nbsp;job&nbsp;on&nbsp;non&nbsp;responding&nbsp;minions...",function(e){this._runFullCommand(e,"list",D,o)}.bind(this))}var q=o+" on "+window.makeTargetText(n["Target-type"],n.Target);i.querySelector(".function").innerText=q,i.querySelector(".time").innerText=x.dateTimeStr(n.StartTime);var F=this.getPageElement().querySelector(".output"),B=["WHEEL"];n.Minions&&(B=n.Minions),x.addResponseOutput(F,B,n.Result,n.Function),this.resolvePromise()}}])&&Be(n.prototype,r),o&&Be(n,o),t}();function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ye(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ye(this,Qe(t).call(this,"^[/]jobs$","Jobs","#page_jobs","#button_jobs",e))).jobsLoaded=!1,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.jobsLoaded&&t(),e.router.api.getRunnerJobsListJobs().then(function(t){e._updateJobs(t,50,!0)}),e.router.api.getRunnerJobsActive().then(function(t){e._runningJobs(t,!0)})})}}])&&Ge(n.prototype,r),o&&Ge(n,o),t}();function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rt=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=et(t).call(this,"^[/]templates$","Templates","#page_templates","#button_templates",e))||"object"!==Xe(o)&&"function"!=typeof o?tt(r):o).jobsLoaded=!1,n._updateTemplates=n._updateTemplates.bind(tt(n)),n._applyTemplate=n._applyTemplate.bind(tt(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,D),n=t,(r=[{key:"onShow",value:function(){var e=this;return new Promise(function(t,n){e.resolvePromise=t,e.jobsLoaded&&t(),e.router.api.getRunnerJobsListJobs().then(e._updateJobs),e.router.api.getRunnerJobsActive().then(e._runningJobs),e.router.api.getWheelConfigValues().then(e._updateTemplates)})}},{key:"_updateTemplates",value:function(e){var t=this.getPageElement().querySelector(".templates"),n=e.return[0].data.return.saltgui_templates;window.localStorage.setItem("templates",JSON.stringify(n));var r=Object.keys(n).sort(),o=!0,i=!1,a=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value,c=n[s];this._addTemplate(t,s,c)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}},{key:"_addTemplate",value:function(e,t,n){var r=this,o=document.createElement("tr");o.appendChild(i._createTd("name",t));var a=n.description;a?o.appendChild(i._createTd("description",a)):o.appendChild(i._createTd("description value_none","(none)"));var u=n.targettype,l=n.target;u||l?l?u?o.appendChild(i._createTd("target",u+" "+l)):o.appendChild(i._createTd("target",l)):o.appendChild(i._createTd("target",u)):o.appendChild(i._createTd("target value_none","(none)"));var s=n.command;s?o.appendChild(i._createTd("command",s)):o.appendChild(i._createTd("command value_none","(none)")),new DropDownMenu(o).addMenuItem("Apply&nbsp;template...",function(e){this._applyTemplate(e,u,l,s)}.bind(this)),e.tBodies[0].appendChild(o),o.addEventListener("click",function(e){return r._applyTemplate(e,u,l,s)})}},{key:"_applyTemplate",value:function(e,t,n,r){this._runFullCommand(e,t,n,r)}}])&&Ze(n.prototype,r),o&&Ze(n,o),t}();function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var it=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.commandbox=t,this._manualRunMenuSysDocRun=this._manualRunMenuSysDocRun.bind(this),t.cmdmenu.addMenuItem(this._manualRunMenuSysDocPrepare,this._manualRunMenuSysDocRun)}var t,n,r;return t=e,(n=[{key:"_manualRunMenuSysDocPrepare",value:function(e){var t=document.querySelector(".run-command #target").value;t=t?"target":"all minions";var n=document.querySelector(".run-command #command").value;(n=(n=n.trim().replace(/ .*/,"")).trim().replace(/[.]*$/,"")).match(/^[a-z_][a-z0-9_.]*$/i)&&n?"runners"===n||n.startsWith("runners.")?((n=n.substring(8))&&(n=" "+n),e.innerText="Run 'runners.doc.runner"+n+"'",e.style.display="block"):"wheel"===n||n.startsWith("wheel.")?((n=n.substring(6))&&(n=" "+n),e.innerText="Run 'runners.doc.wheel"+n+"'",e.style.display="block"):(e.innerText="Run 'sys.doc "+n+"' on "+t,e.style.display="block"):e.style.display="none"}},{key:"_manualRunMenuSysDocRun",value:function(){var e=this,t=document.querySelector(".run-command input[type='submit']");if(!t.disabled){var n=document.querySelector(".run-command pre"),r=document.querySelector(".run-command #target").value;""===r&&(r="*");var o,i,a=document.querySelector(".run-command #command").value;a=(a=a.trim().replace(/ .*/,"")).trim().replace(/[.]*$/,""),t.disabled=!0,n.innerText="Loading...","runners"===a||a.startsWith("runners.")?(o="runners.doc.runner",i="runners.doc.runner "+a):"wheel"===a||a.startsWith("wheel.")?(o="runners.doc.wheel",i="runners.doc.wheel "+a):(o="sys.doc "+a,i="sys.doc "+a);var u=TargetType.menuTargetType._value;this.commandbox._getRunParams(u,r,o).then(function(t){return e.commandbox._onRunReturn(t.return[0],i)})}}}])&&ot(t.prototype,n),r&&ot(t,r),e}();function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createMenu",value:function(){var t=document.getElementById("runblock");e.menuRunType=new F(t),e.menuRunType.setTitle(""),e.menuRunType.addMenuItem("Normal",this._updateRunTypeText,"normal"),e.menuRunType.addMenuItem("Async",this._updateRunTypeText,"async")}},{key:"_updateRunTypeText",value:function(){switch(e.getRunType()){case"normal":e.menuRunType.setTitle("Normal");break;case"async":e.menuRunType.setTitle("Async")}}},{key:"setRunTypeDefault",value:function(){e.menuRunType._value="normal",e._updateRunTypeText(),e.menuRunType.setTitle("")}},{key:"getRunType",value:function(){var t=e.menuRunType._value;return void 0===t||""===t?"normal":t}}],(n=null)&&at(t.prototype,n),r&&at(t,r),e}();function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var st=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createMenu",value:function(){var t=document.getElementById("targetbox");e.menuTargetType=new F(t),e.menuTargetType.addMenuItem("Normal",this.manualUpdateTargetTypeText,"glob"),e.menuTargetType.addMenuItem("List",this.manualUpdateTargetTypeText,"list"),e.menuTargetType.addMenuItem(e._targetTypeNodeGroupPrepare,this.manualUpdateTargetTypeText,"nodegroup"),e.menuTargetType.addMenuItem("Compound",this.manualUpdateTargetTypeText,"compound"),e.setTargetTypeDefault()}},{key:"_targetTypeNodeGroupPrepare",value:function(e){var t=window.localStorage.getItem("nodegroups");t&&"{}"!==t?(e.innerText="Nodegroup",e.style.display="block"):e.style.display="none"}},{key:"autoSelectTargetType",value:function(t){if(void 0===e.menuTargetType._value||""===e.menuTargetType._value||e.menuTargetType._system)return t.includes("@")||t.includes(" ")||t.includes("(")||t.includes(")")?(e.menuTargetType._value="compound",void e._updateTargetTypeText()):t.includes(",")?(e.menuTargetType._value="list",void e._updateTargetTypeText()):t.startsWith("#")?(e.menuTargetType._value="nodegroup",void e._updateTargetTypeText()):void e.setTargetTypeDefault()}},{key:"manualUpdateTargetTypeText",value:function(){e.menuTargetType._system=!1,e._updateTargetTypeText()}},{key:"_updateTargetTypeText",value:function(){switch(e.getTargetType()){case"compound":e.menuTargetType.setTitle("Compound");break;case"glob":e.menuTargetType.setTitle("Normal");break;case"list":e.menuTargetType.setTitle("List");break;case"nodegroup":e.menuTargetType.setTitle("Nodegroup")}}},{key:"setTargetTypeDefault",value:function(){e.menuTargetType._value="glob",e.menuTargetType.setTitle(""),e.menuTargetType._system=!0}},{key:"setTargetType",value:function(t){e.menuTargetType._value=t,e.menuTargetType._system=!0,e._updateTargetTypeText()}},{key:"getTargetType",value:function(){var t=e.menuTargetType._value;return void 0===t||""===t?"glob":t}}],(n=null)&&lt(t.prototype,n),r&&lt(t,r),e}();function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ft=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t,this._getRunParams=this._getRunParams.bind(this),this._onRun=this._onRun.bind(this),this._onRunReturn=this._onRunReturn.bind(this),this._showManualRun=this._showManualRun.bind(this),this._hideManualRun=this._hideManualRun.bind(this);var n=document.querySelector(".run-command #cmdbox");this.cmdmenu=new F(n),this.documentation=new it(this),this._registerEventListeners(),ut.createMenu(),st.createMenu();var r=document.querySelector(".run-command #templatemenuhere"),o=new F(r),i=window.localStorage.getItem("templates");i&&"undefined"!==i||(i="{}");var a=JSON.parse(i),u=Object.keys(a).sort(),l=this,s=!0,c=!1,d=void 0;try{for(var f,p=function(){var e=f.value,t=a[e],n=t.description;n||(n="("+e+")"),o.addMenuItem(n,function(){l._applyTemplate(t)})},y=u[Symbol.iterator]();!(s=(f=y.next()).done);s=!0)p()}catch(e){c=!0,d=e}finally{try{s||null==y.return||y.return()}finally{if(c)throw d}}}var t,n,r;return t=e,(n=[{key:"_registerEventListeners",value:function(){document.querySelector("#popup_runcommand").addEventListener("click",this._hideManualRun),document.querySelector("#button_manualrun").addEventListener("click",this._showManualRun),document.querySelector("#button_close_cmd").addEventListener("click",this._hideManualRun),document.querySelector(".run-command input[type='submit']").addEventListener("click",this._onRun),this._addKeyEventListener("#target",function(e){var t=document.querySelector(".run-command #target").value;st.autoSelectTargetType(t)}),this._addKeyEventListener("#command",this.cmdmenu.verifyAll)}},{key:"_applyTemplate",value:function(e){if(e.targettype){var t=e.targettype;document.querySelector("#targetbox").style.display="inherit","glob"!==t&&"list"!==t&&"compound"!==t&&"nodegroup"!==t&&(t="glob"),st.setTargetType(t)}else st.setTargetTypeDefault();e.target&&(document.querySelector(".run-command #target").value=e.target);e.command&&(document.querySelector(".run-command #command").value=e.command)}},{key:"_addKeyEventListener",value:function(e,t){document.querySelector(e).addEventListener("keyup",t),document.querySelector(e).addEventListener("cut",t),document.querySelector(e).addEventListener("paste",t),document.querySelector(e).addEventListener("blur",t),document.querySelector(e).addEventListener("focus",t)}},{key:"_onRun",value:function(){var e=this,t=document.querySelector(".run-command input[type='submit']");if(!t.disabled){var n=document.querySelector(".run-command pre"),r=document.querySelector(".run-command #target").value,o=document.querySelector(".run-command #command").value,i=st.menuTargetType._value,a=this._getRunParams(i,r,o);null!==a&&(t.disabled=!0,n.innerText="Loading...",a.then(function(t){e._onRunReturn(t.return[0],o)}))}}},{key:"_onRunReturn",value:function(e,t){var n=document.querySelector(".run-command pre"),r=Object.keys(e);t.startsWith("runners.")&&(r=["RUNNER"]),t.startsWith("wheel.")&&(r=["WHEEL"]),x.addResponseOutput(n,r,e,t),document.querySelector(".run-command input[type='submit']").disabled=!1}},{key:"_showManualRun",value:function(e){document.querySelector("#popup_runcommand").style.display="block",document.body.style["overflow-y"]="hidden",document.querySelector(".run-command pre").innerText="Waiting for command...";var t=document.querySelector(".run-command #target").value;st.autoSelectTargetType(t),ut.setRunTypeDefault();for(var n=document.getElementById("targetlist");n.firstChild;)n.removeChild(n.firstChild);var r=JSON.parse(window.localStorage.getItem("nodegroups"));if(r){var o=!0,i=!1,a=void 0;try{for(var u,l=Object.keys(r).sort()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var s=u.value,c=document.createElement("option");c.value="#"+s,n.appendChild(c)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}var d=JSON.parse(window.localStorage.getItem("minions"));if(d){var f=!0,p=!1,y=void 0;try{for(var m,h=d.sort()[Symbol.iterator]();!(f=(m=h.next()).done);f=!0){var b=m.value,v=document.createElement("option");v.value=b,n.appendChild(v)}}catch(e){p=!0,y=e}finally{try{f||null==h.return||h.return()}finally{if(p)throw y}}}e.stopPropagation()}},{key:"_hideManualRun",value:function(e){if("popup"===e.target.className||"nearlyvisiblebutton"===e.target.className){document.querySelector("#popup_runcommand").style.display="none",document.body.style["overflow-y"]="scroll",ut.setRunTypeDefault(),st.setTargetTypeDefault();var t=document.querySelector(".run-command #command").value.split(" ")[0],n=document.querySelector(".run-command pre").innerText;["grains.append","grains.delkey","grains.delval","grains.setval","saltutil.refresh_grains","saltutil.refresh_pillar","schedule.delete","schedule.disable","schedule.disable_job","schedule.enable","schedule.enable_job","schedule.modify","wheel.key.accept","wheel.key.delete","wheel.key.reject"].includes(t)&&"Waiting for command..."!==n&&location.reload(),e.stopPropagation()}}},{key:"_showError",value:function(e){this._onRunReturn(e,"")}},{key:"_getRunParams",value:function(e,t,n){var r=this;if("nodegroup"===e&&t.startsWith("#")&&(t=t.substring(1)),""===n)return this._showError("'Command' field cannot be empty"),null;var o=[],i={},a=window.parseCommandLine(n,o,i);if(null!==a)return this._showError(a),null;if(0===o.length)return this._showError("First (unnamed) parameter is the function name, it is mandatory"),null;var u=o.shift();if("string"!=typeof u)return this._showError("First (unnamed) parameter is the function name, it must be a string, not a "+ct(u)),null;if(""===t&&"runners"!==u&&!u.startsWith("runners."))return this._showError("'Target' field cannot be empty"),null;if("nodegroup"===e){var l=JSON.parse(window.localStorage.getItem("nodegroups"));if(!(l&&t in l))return this._showError("Unknown nodegroup '"+t+"'"),null}var s={};u.startsWith("runners.")?((s=i).client="runner",s.fun=u.substring(8),o.length>0&&(s.arg=o)):u.startsWith("wheel.")?((s=i).client="wheel",s.fun=u.substring(6),s.match=t):(s.client="local",s.fun=u,s.tgt=t,e&&(s.tgt_type=e),0!==o.length&&(s.arg=o),Object.keys(i).length>0&&(s.kwarg=i));var c=ut.getRunType();return"local"===s.client&&"async"===c&&(s.client="local_async"),this.api.apiRequest("POST","/",s).catch(function(e){return r._showError(e.message),e})}}])&&dt(t.prototype,n),r&&dt(t,r),e}();function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ht(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){var t="function"==typeof Map?new Map:void 0;return(bt=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return vt(e,arguments,_t(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),gt(r,e)})(e)}function vt(e,t,n){return(vt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&gt(o,n.prototype),o}).apply(null,arguments)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wt=function(e){function t(e,n){var r;return mt(this,t),(r=ht(this,_t(t).call(this))).status=e,r.message=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,bt(Error)),t}(),Tt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";mt(this,e),this.APIURL=t}var t,n,r;return t=e,(n=[{key:"isAuthenticated",value:function(){return this.apiRequest("GET","/stats",{}).then(function(e){return null!==window.sessionStorage.getItem("token")},function(e){return!1})}},{key:"login",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pam",r={username:e,password:t,eauth:n};return window.localStorage.setItem("eauth",n),this.apiRequest("POST","/login",r).then(function(e){var t=e.return[0];if(0===Object.keys(t.perms).length)throw new wt(403,"Unauthorized");window.sessionStorage.setItem("token",t.token)})}},{key:"logout",value:function(){return this.apiRequest("POST","/logout",{}).then(function(e){window.sessionStorage.removeItem("token")})}},{key:"getLocalGrainsItems",value:function(e){var t={client:"local",fun:"grains.items"};return e?(t.tgt_type="list",t.tgt=e):(t.tgt_type="glob",t.tgt="*"),this.apiRequest("POST","/",t).catch(console.error)}},{key:"getLocalPillarItems",value:function(e){var t={client:"local",fun:"pillar.items"};return e?(t.tgt_type="list",t.tgt=e):(t.tgt_type="glob",t.tgt="*"),this.apiRequest("POST","/",t).catch(console.error)}},{key:"getLocalPillarObfuscate",value:function(e){var t={client:"local",fun:"pillar.obfuscate"};return e?(t.tgt_type="list",t.tgt=e):(t.tgt_type="glob",t.tgt="*"),this.apiRequest("POST","/",t).catch(console.error)}},{key:"getLocalScheduleList",value:function(e){var t={client:"local",fun:"schedule.list",kwarg:{return_yaml:!1}};return e?(t.tgt_type="list",t.tgt=e):(t.tgt_type="glob",t.tgt="*"),this.apiRequest("POST","/",t).catch(console.error)}},{key:"getRunnerJobsActive",value:function(){return this.apiRequest("POST","/",{client:"runner",fun:"jobs.active"}).catch(console.error)}},{key:"getRunnerJobsListJob",value:function(e){var t={client:"runner",fun:"jobs.list_job",jid:e};return this.apiRequest("POST","/",t).catch(console.error)}},{key:"getRunnerJobsListJobs",value:function(){return this.apiRequest("POST","/",{client:"runner",fun:"jobs.list_jobs"}).catch(console.error)}},{key:"getWheelConfigValues",value:function(){return this.apiRequest("POST","/",{client:"wheel",fun:"config.values"}).catch(console.error)}},{key:"getWheelKeyFinger",value:function(){return this.apiRequest("POST","/",{client:"wheel",fun:"key.finger",match:"*"}).catch(console.error)}},{key:"getWheelKeyListAll",value:function(){return this.apiRequest("POST","/",{client:"wheel",fun:"key.list_all"}).catch(console.error)}},{key:"apiRequest",value:function(e,t,n){var r=this.APIURL+t,o=window.sessionStorage.getItem("token"),i={method:e,url:r,headers:{Accept:"application/json","X-Auth-Token":null!==o?o:"","Cache-Control":"no-cache"}};return"POST"===e&&(i.body=JSON.stringify(n)),fetch(r,i).then(function(e){if(e.ok)return e.json();throw new wt(e.status,e.statusText)})}}])&&yt(t.prototype,n),r&&yt(t,r),e}();function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kt=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=new Tt,this.commandbox=new ft(this.api),this.currentRoute=void 0,this.routes=[],this.registerRoute(new d(this)),this.registerRoute(new G(this)),this.registerRoute(new ee(this)),this.registerRoute(new ue(this)),this.registerRoute(new pe(this)),this.registerRoute(new _e(this)),this.registerRoute(new Ee(this)),this.registerRoute(new Me(this)),this.registerRoute(new qe(this)),this.registerRoute(new Ke(this)),this.registerRoute(new ze(this)),this.registerRoute(new rt(this));var n=window.localStorage.getItem("templates");n&&"undefined"!==n&&(document.querySelector("#button_templates1").style.display="inline-block",document.querySelector("#button_templates2").style.display="inline-block");this._registerEventListeners(),this.api.isAuthenticated().then(function(e){return t.goTo(e?window.location.pathname+window.location.search:"/login")}).catch(function(e){console.error(e),t.goTo("/login")})}var t,n,r;return t=e,(n=[{key:"_registerEventListeners",value:function(){var e=this,t=this;document.querySelector(".logo").addEventListener("click",function(e){"/login"!==window.location.pathname&&t.goTo("/")}),document.querySelector("#button_minions1").addEventListener("click",function(e){window.location.replace("/")}),document.querySelector("#button_minions2").addEventListener("click",function(e){window.location.replace("/")}),document.querySelector("#button_grains1").addEventListener("click",function(e){window.location.replace("/grains")}),document.querySelector("#button_grains2").addEventListener("click",function(e){window.location.replace("/grains")}),document.querySelector("#button_schedules1").addEventListener("click",function(e){window.location.replace("/schedules")}),document.querySelector("#button_schedules2").addEventListener("click",function(e){window.location.replace("/schedules")}),document.querySelector("#button_pillars1").addEventListener("click",function(e){window.location.replace("/pillars")}),document.querySelector("#button_pillars2").addEventListener("click",function(e){window.location.replace("/pillars")}),document.querySelector("#button_keys1").addEventListener("click",function(e){window.location.replace("/keys")}),document.querySelector("#button_keys2").addEventListener("click",function(e){window.location.replace("/keys")}),document.querySelector("#button_jobs1").addEventListener("click",function(e){window.location.replace("/jobs")}),document.querySelector("#button_jobs2").addEventListener("click",function(e){window.location.replace("/jobs")}),document.querySelector("#button_templates1").addEventListener("click",function(e){window.location.replace("/templates")}),document.querySelector("#button_templates2").addEventListener("click",function(e){window.location.replace("/templates")}),document.querySelector("#button_logout1").addEventListener("click",function(t){e.api.logout().then(function(){window.location.replace("/")})}),document.querySelector("#button_logout2").addEventListener("click",function(t){e.api.logout().then(function(){window.location.replace("/")})})}},{key:"registerRoute",value:function(e){this.routes.push(e),e.onRegister&&e.onRegister()}},{key:"goTo",value:function(e){if(!(this.switchingRoute||window.location.pathname===e&&this.currentRoute)){var t=!0,n=!1,r=void 0;try{for(var o,i=this.routes[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.getPath().test(e.split("?")[0]))return window.history.pushState({},void 0,e),void this.showRoute(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}}}},{key:"showRoute",value:function(e){var t=this;e.getPageElement().style.display="";var n=document.getElementById("button_minions1"),r=document.getElementById("button_jobs1");Array.from(document.querySelectorAll(".menu_item_active")).forEach(function(e){e.classList.remove("menu_item_active")});var o=e.getMenuItemElement1();o&&(o.classList.add("menu_item_active"),"button_pillars1"!==o.id&&"button_schedules1"!==o.id&&"button_grains1"!==o.id||n.classList.add("menu_item_active"),"button_jobs1"!==o.id&&"button_templates1"!==o.id||r.classList.add("menu_item_active"));var i=e.getMenuItemElement2();i&&i.classList.add("menu_item_active"),t.switchingRoute=!0;var a,u=function(e){void 0!==t.currentRoute&&t.hideRoute(t.currentRoute),t.currentRoute=e,document.title="SaltGUI - "+t.currentRoute.getName(),t.currentRoute.getPageElement().className="route current",t.switchingRoute=!1};e.onShow&&(a=e.onShow()),a&&a.then?a.then(u(e)):u(e)}},{key:"hideRoute",value:function(e){e.getPageElement().className="route",setTimeout(function(){e.getPageElement().style.display="none"},500),e.onHide&&e.onHide()}}])&&St(t.prototype,n),r&&St(t,r),e}();window.addEventListener("load",function(){return new kt})}]);
//# sourceMappingURL=saltgui.bundle.js.map